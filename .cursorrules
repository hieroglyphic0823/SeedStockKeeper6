## er6 開発ルール
## プレビュー画面のルール
- **プレビュー画面には必ず実装の変更を反映する**
- 実装を変更した際は、対応するプレビュー画面も必ず更新する
- プレビュー画面で使用するデモデータは実装と一致させる
- プレビュー画面の高さは内容に応じて適切に調整する

## UI/UX のルール
- **アイコンサイズは24dpで統一する**
- Material3のカラーパレットを使用する
- カラーの変更時は、実装とプレビュー画面の両方に反映する
- ボタンの色は用途に応じて適切なカラーパレットを使用する
  - 播種期間: PrimaryContainer
  - 収穫期間: SecondaryContainer
  - 有効期限: tertiaryContaineの
  - 播種アイコン: MaterialTheme.colorScheme.onPrimaryContainer
  - 収穫アイコン: アイコンそのままの色
  
- **デモデータは一貫性を保つ**
- 地域区分は「寒地」「寒冷地」「温暖地」「暖地」を使用
- デモデータの商品名は「恋むすめ」、品種は「ニンジン」、科は「せり科」を使用
- 有効期限は2026年10月を基準とする
- 発芽率は「85」を使用

## コード品質のルール
- コンパイルエラーは必ず修正する
- 未解決参照エラーは必ず解決する
- プレビュー画面の表示エラーは必ず修正する
- 実装とプレビュー画面の表示内容は一致させる

## ファイル構成のルール
- プレビュー画面は役割ごとに分割して管理する
- 大きなファイルは適切に分割する
- プレビュー専用のヘルパー関数は`PreviewHelpers.kt`に集約する

## 注意事項
- 実装を変更した際は、必ずプレビュー画面も確認・更新する
- プレビュー画面でエラーが発生した場合は、実装の変更が原因の可能性を考慮する
- デモデータの変更時は、すべてのプレビュー画面で一貫性を保つ
## 言語設定
- **常に日本語で回答する**
- コードの説明、コメント、エラーメッセージはすべて日本語で記述する
- 技術的な説明も日本語で行う
## ファイル分割ルール
## ファイル分割ルール
- 既存のコードを分割する際は、次のルールを必ず守ること:  
  1. 既存の機能を絶対に削除や変更をしないこと。  
  2. 各ファイルは一つの責務に分割すること。例 UI データモデル Repository ViewModel など。  
  3. import と package 宣言は必ず正しく書くこと。相対パスではなく正式なパッケージパスを使うこと。  
  4. 分割後もビルドエラーが出ないように依存関係を正しく保つこと。  
  5. 既存の関数名とクラス名は変更しないこと。  
  6. 新しいファイルに移動するだけとしロジックは一切変更しないこと。  
  7. 移動後は全ファイルの参照を自動修正して整合性を保つこと。  
  8. 分割後は既存の型定義を変更しないこと。Null許容の有無も含む。  
  9. 型推論で曖昧になる場合は必ず明示的に型を指定すること。  
  10. NonNull の引数に Nullable を渡さないこと。エルビス演算子やデフォルト値で吸収すること。  
  11. クラスやデータモデルを移動した場合は参照元に正しい import を追加すること。  
  12. 移動元と移動先の package を一致させ Unresolved reference を出さないこと。  
  13. 既存の型や関数 定数 拡張関数は必ずファイルとして残し削除しないこと。  
  14. val と var の宣言は分割前と同じ修飾子を維持すること。  
  15. 一つのファイルの目標行数は五百行とし許容は四百五十から五百五十行。超過時は責務単位でさらに分割すること。  
  16. 未解決参照は必ず解消すること。定義を別ファイルへ移動した場合は定義を残すか復元すること。定義が見当たらない場合は使用箇所から最小限の暫定定義を作成し後で置換できるように TODO を付けること。  
  17. 戻り値と引数の型は宣言と完全一致させること。NonNull を要求する宣言に Nullable を返さないこと。必要なら実装内部でフォールバック値を適用すること。  
  18. Nullable を NonNull に合わせる場合はエルビス演算子 初期値 mapNotNull filterNotNull などで吸収し 二重否定は使わないこと。  
  19. 関数とプロパティのシグネチャは変更しないこと。シグネチャ変更は本ルールでは禁止とする。  
  20. import と package 更新後は同名衝突や型エイリアスの不整合が無いことを確認し Unresolved reference をゼロにすること。  
  21. トップレベル関数や拡張関数やコンパニオンオブジェクトのファクトリなどを分割によって削除や改名しないこと。  
  22. それらを呼び出す箇所では必ず正しい import または完全修飾名を追加し Unresolved reference を出さないこと。  
  23. 名前の重複やシャドーイングがある場合は完全修飾名で呼ぶこと。  

## ファイル分割ルール 共通動作
- FILE_NAME.kt を分割して と指示された場合は以下を自動的に行うこと:  
  1. UI 部分は元の FILE_NAME.kt に残すこと。  
  2. ViewModel 部分は FILE_NAME_ViewModel.kt に移動すること。  
  3. データモデルとリポジトリは必要に応じて FILE_NAME_Model.kt と FILE_NAME_Repository.kt に分割すること。  
  4. Preview 部分は FILE_NAME_Preview.kt に分離すること。  
  5. 各ファイルは五百五十行以内に収め超過時はさらに分割すること。  
  6. 実施後に未解決参照がゼロであることを確認し戻り値と引数の型が宣言と完全一致することを保証すること。NonNull 契約を満たすために必要ならフォールバック値を実装内で適用すること。  
  7. 本セクションは上の一から二十三のルールをすべて遵守すること。  
  8. 既存の機能とロジックは変更せず import と package を修正しビルド可能な状態を維持すること。  
## エラー修正ルール
- 既存機能の不具合やビルドエラーを修正する際は次のルールを必ず守ること  
  1. 機能の削除や仕様変更を禁止すること  
  2. 公開API名 クラス名 引数名 戻り値の型は不変とすること 署名を変更しないこと  
  3. 戻り値と引数の型は宣言どおりに厳密一致させること NonNull を要求する宣言に Nullable を返さないこと  
  4. Null 安全はフォールバック値 デフォルト値 エルビス演算子で吸収し 二重否定は使わないこと  
  5. 既存のトップレベル関数 拡張関数 定数 コンパニオンのファクトリは削除や改名をしないこと  
  6. 未解決参照は必ず解消すること 必要な import を追加するか完全修飾名を用いること  
  7. import と package を更新後 同名衝突 型エイリアス不整合を解消し Unresolved reference をゼロにすること  
  8. 暫定対応が必要な場合は最小限のスタブやシムを追加し TODO を付けて後置換可能にすること 既存の呼び出し側は維持すること  
  9. 例外は握りつぶさないこと ログ出力と原因コメントを残すこと  
  10. val と var の宣言は元の修飾子を維持すること 再代入が必要なら var を用いること  
  11. 実装の差し替えは等価な内部実装のみ許容すること 外部の振る舞いは完全一致させること  
  12. プレビューとテストは実装の真実に追随させること 表示崩れや失敗を残さないこと  
  13. ログは共通ラッパ経由で出力し 機能削除せず無効化で対応できる構成とすること  
  14. 変更範囲は最小に限定すること 一つの原因に一つの修正を原則とすること  
  15. 修正後はビルド成功 未解決参照ゼロ 型不一致ゼロ UI プレビュー正常 という完了条件を満たすこと

## エラー修正ルール 共通動作
- エラーを修正して と指示された場合は以下を自動的に行うこと  
  1. 作業用ブランチを作成すること 例 fix スラッシュ 課題名  
  2. 既存の公開APIの署名を保持したまま内部のみ最小変更で修正すること  
  3. 型不一致がある場合は宣言型に合わせて内部でフォールバック値や明示的型指定で解消すること  
  4. 未解決参照がある場合は定義の所在を特定し import を追加するか完全修飾名へ置換すること 定義が欠落している場合は最小の暫定定義を追加し TODO を付けること  
  5. import と package を整理し 最適化後もビルドが通ることを確認すること  
  6. プレビューやテストを更新し 画面表示と期待結果が一致していることを確認すること  
  7. 変更点の要約を作成すること 目的 影響範囲 追加ファイル 既存機能への影響なし を含めること
## 画面呼び方用語集
- **種札**: 種目録画面(SeedListScreen)の種カード
- **種覚書**: 種登録画面(SeedInputScreen)
- **お城画面**: ダッシュボード画面(CastleScreen)
- **種暦画面**: カレンダー画面(CalendarScreen)
- **通知履歴画面**: 通知履歴画面(NotificationHistoryScreen)
- **設定画面**: 設定画面(SettingsScreen)
- **メイン画面**: メインスキャフォールド(MainScaffold)
- **スプラッシュ画面**: 起動画面(VideoSplashScreen)
- **御作場帳画面**: 設定画面(SettingsScreen)内の農園情報登録機能
- **作場の地選択画面**: 農園位置選択画面(MapSelectionScreen)

## 画面説明
- **種札**: 種の一覧を表示するカード形式のUI要素
- **種覚書**: 種の詳細情報を登録・編集する画面
- **お城画面**: 農園のダッシュボードとして統計情報や通知を表示
- **種暦画面**: 播種・収穫のスケジュールをカレンダー形式で表示
- **通知履歴画面**: 過去の通知履歴を一覧表示
- **設定画面**: アプリの各種設定を管理
- **メイン画面**: アプリ全体のナビゲーションとレイアウトを管理
- **スプラッシュ画面**: アプリ起動時の初期画面
- **御作場帳画面**: 農園の基本情報(農園名、位置、農園主、地域)を登録・管理
- **作場の地選択画面**: 農園の位置を地図で選択・設定する画面
